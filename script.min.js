const localTimeElement=document.getElementById("clock-local"),addedClocksContainer=document.getElementById("added-clocks-container"),toggleClockForm=document.getElementById("toggleClockForm"),clockForm=document.querySelector(".top-95");function updateLocalClock(){const now=moment();localTimeElement.textContent=`Current time:\r\n ${now.format("YYYY-MM-DD HH:mm:ss")}`}function updateAddedClocks(){const addedClocks=JSON.parse(localStorage.getItem("clocks"))||[];addedClocks.forEach(clock=>{const clockElement=document.getElementById(`clock-${clock.timezone}`);if(clockElement){const now=moment().tz(clock.timezone);clockElement.textContent=`${clock.city}:\r\n ${now.format("YYYY-MM-DD HH:mm:ss")}`}})}function updateCitiesDatalist(){const continentInput=document.getElementById("continent"),cityInput=document.getElementById("city"),citiesDatalist=document.getElementById("cities"),selectedContinent=continentInput.value,cities=moment.tz.names().filter(name=>name.startsWith(selectedContinent));citiesDatalist.innerHTML="",cities.forEach(city=>{const option=document.createElement("option");option.value=city,citiesDatalist.appendChild(option)}),cityInput.value=""}toggleClockForm.addEventListener("click",()=>{clockForm.classList.toggle("bottom-0"),clockForm.classList.contains("bottom-0")?toggleClockForm.textContent="Close box":toggleClockForm.textContent="Add another clock",cityInput.value="",continentInput.value=""});const cityInput=document.getElementById("city"),continentInput=document.getElementById("continent"),clockNameInput=document.getElementById("clockName");function addClock(){const city=cityInput.value,continent=continentInput.value,timezone=continent?`${continent}/${city}`:city,addedClocks=JSON.parse(localStorage.getItem("clocks"))||[],clockObj={city:city,continent:continent,timezone:timezone};console.log({clockObj:clockObj}),addedClocks.push(clockObj),localStorage.setItem("clocks",JSON.stringify(addedClocks));const newClockElement=document.createElement("div");newClockElement.id=`clock-${timezone}`,addedClocksContainer.appendChild(newClockElement);const now=moment().tz(timezone);newClockElement.textContent=`${city}:\r\n ${now.format("YYYY-MM-DD HH:mm:ss")}`,makeClocksDraggable(),cityInput.value="",continentInput.value=""}function populateTimezones(){const citiesDatalist=document.getElementById("cities");moment.tz.names().forEach(city=>{const option=document.createElement("option");option.value=city,citiesDatalist.appendChild(option)})}function clearLocalStorage(){localStorage.clear(),addedClocksContainer.innerHTML=""}function makeClocksDraggable(){for(var draggableElems=document.querySelectorAll('[id^="clock-"]'),draggies=[],i=0;i<draggableElems.length;i++){var draggableElem=draggableElems[i],draggie=new Draggabilly(draggableElem,{});draggies.push(draggie)}}window.onload=function(){updateLocalClock(),setInterval(updateLocalClock,1e3),setInterval(updateAddedClocks,1e3),populateTimezones();const addedClocks=JSON.parse(localStorage.getItem("clocks"))||[],addedClocksContainer=document.getElementById("added-clocks-container");addedClocks.forEach(clock=>{const newClockElement=document.createElement("div");newClockElement.id=`clock-${clock.timezone}`,addedClocksContainer.appendChild(newClockElement);const now=moment().tz(clock.timezone);newClockElement.textContent=`${clock.city}:\r\n ${now.format("YYYY-MM-DD HH:mm:ss")}`}),makeClocksDraggable();const continentInput=document.getElementById("continent");continentInput.addEventListener("input",updateCitiesDatalist)};